# -*- coding: utf-8 -*-
"""appTitanic.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1m421R_MKAsYSXRt_QNurDy2heEhlRLFQ
"""

import streamlit as st
import pandas as pd
import joblib

# Load the trained model
model = joblib.load('titanic_model.pkl')

# Streamlit app title
st.title("Titanic Survival Prediction")

# Create input fields for the features
# Adjust the features based on your dataset and model
pclass = st.selectbox("Passenger Class (1, 2, 3)", [1, 2, 3])
sex = st.selectbox("Sex", ["1", "0"])
age = st.number_input("Age", min_value=0.0, value=30.0)  # Default to 30
sibsp = st.number_input("Number of Siblings/Spouses Aboard", min_value=0, value=0)
parch = st.number_input("Number of Parents/Children Aboard", min_value=0, value=0)
fare = st.number_input("Fare", min_value=0.0, value=10.0)  # Default fare
embarked = st.selectbox("Embarked", ["1", "2","3"])
# Create a button to make predictions
if st.button("Predict"):
    # Prepare the input data for prediction
    input_data = pd.DataFrame({
        'Pclass': [pclass],
        'Sex': [sex],
        'Age': [age],
        'SibSp': [sibsp],
        'Parch': [parch],
        'Fare': [fare],
        'Embarked': [embarked]  # Add this line if you have 'Embarked
    })

    # Convert categorical variables (if applicable)
    input_data = pd.get_dummies(input_data, drop_first=True)

    # Ensure the input data has the same columns as the training data
    model_columns = ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare', 'Sex','Embarked']
    for col in model_columns:
        if col not in input_data.columns:
            input_data[col] = 0
    input_data = input_data[model_columns]

    # Make prediction
    prediction = model.predict(input_data)
    prediction_proba = model.predict_proba(input_data)[:, 1]

    # Display the result
    st.write(f"Prediction: {'Survived' if prediction[0] == 1 else 'Did not survive'}")
    st.write(f"Prediction Probability: {prediction_proba[0]:.2f}")